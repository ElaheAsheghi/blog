{% extends 'parent/base.html' %}
{% load blog_tags %}
{% block title %}Post list{% endblock %}
{% block content %}
<div class="container-sm">
    {% for post in random_item %}
    <div class="list-group">
            <a href="{{post.get_absolute_url}}" class="list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">{{post.title}}</h5>
                <small class="text-body-secondary">{{post.created}}</small>
            </div>
            <img class="rounded mx-auto d-block" src="{{ post.images.first.image_file.url }}" alt="{{ post.images.first.title }}">
            <p class="mb-1"></p>
            <small class="text-body-secondary">{{post.description|truncatewords:4}}.</small>
            </a>
      </div>
    {% endfor %}
    <br>

 
    <div class="container text-center">
        <div class="row">
          <div class="col">
            <div class="card text-bg-light mb-3" style="max-width: 18rem;">
                <div class="card-header">آمار بلاگ</div>
                <div class="card-body">
                  <h5 class="card-title"></h5>
                  <p class="card-text">
                    {% total_posts %} posts
                    <br>
                    {% total_comments %} comments
                    <br>
                    {% total_users %} users
                  </p>
                </div>
              </div>
          </div>

          <div class="col">
            <div class="card text-bg-light mb-3" style="max-width: 18rem;">
                <div class="card-header">آخرین پست ها</div>
                <div class="card-body">
                <h5 class="card-title"></h5>
                <p class="card-text">
                    {% latest_posts %}
                </p>
                </div>
            </div>
          </div>
          
        <div class="col">
            <div class="card text-bg-light mb-3" style="max-width: 18rem;">
                <div class="card-header">محبوبترین پست ها</div>
                <div class="card-body">
                  <h5 class="card-title"></h5>
                  <p class="card-text">
                    {% most_popular_posts 3 as pop_posts %}
                    {% for post in pop_posts %}
                        <a href="{{post.get_absolute_url}}">
                            {{post.title}} 
                        </a>
                        with {{post.comments_count}} comments
                        <br>
                    {% endfor %}
                  </p>
                </div>
              </div>
          </div>
        </div>
      </div>
    
      <div class="container text-center">
        <div class="row">
          <div class="col">
            <div class="card text-bg-light mb-3" style="max-width: 18rem;">
                <div class="card-header">بیشترین زمان مطالعه</div>
                <div class="card-body">
                  <h5 class="card-title"></h5>
                  <p class="card-text">
                    {% max_time %}
                  </p>
                </div>
              </div>
          </div>
          <div class="col">
            <div class="card text-bg-light mb-3" style="max-width: 18rem;">
                <div class="card-header">کمترین زمان مطالعه</div>
                <div class="card-body">
                  <h5 class="card-title"></h5>
                  <p class="card-text">
                    {% min_time %}
                  </p>
                </div>
              </div>
          </div>
          <div class="col">
            <div class="card text-bg-light mb-3" style="max-width: 18rem;">
                <div class="card-header">کاربران فعال</div>
                <div class="card-body">
                  <h5 class="card-title"></h5>
                  <p class="card-text">
                    {% active_user %}
                  </p>
                </div>
              </div>  
        </div>
          </div>
        </div>
      </div>
{% endblock %}